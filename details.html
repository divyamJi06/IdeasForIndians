<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Idea Details</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h2><a href="index.html">Ideas For Indians</a></h2>
    </header>

    <div class="details-container">
        <h2>Idea Details</h2>
        <div id="details-content"></div>

        <!-- Form for adding new suggestion -->
        <form id="add-suggestion-form">
            <label for="new-suggestion">Add New Suggestion:</label>
            <textarea id="new-suggestion" rows="4" cols="50"></textarea>
            <button type="button" onclick="addNewSuggestion()">Submit Suggestion</button>
        </form>

        <div id="suggestions-container">
            <!-- Suggestions will be displayed here -->
        </div>
    </div>

    <script src="ifi.js"></script>
    <script>
        function getParameterByName(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        function showDetails() {
            const detailsContainer = document.getElementById("details-content");
            const suggestionsContainer = document.getElementById("suggestions-container");
            const ideaId = getParameterByName("id");

            if (ideaId) {
                const idea = data.find(item => item.id == ideaId);

                if (idea) {
                    detailsContainer.innerHTML = `
                        <p><strong>Title:</strong> ${idea.title}</p>
                        <p><strong>Description:</strong> ${idea.description}</p>
                        <p><strong>Tags:</strong> ${idea.tags.join(", ")}</p>
                        <p><strong>Likes:</strong> ${idea.likes}</p>
                        <p><strong>User:</strong> ${idea.user.name}</p>
                        <!-- Add more details as needed -->
                    `;

                    // Display suggestions
                    if (idea.suggestions && idea.suggestions.length > 0) {
                        suggestionsContainer.innerHTML = "<h3>Suggestions:</h3>";
                        idea.suggestions.forEach(suggestion => {
                            suggestionsContainer.innerHTML += `
                                <p>${suggestion.description} - ${suggestion.user.name}</p>
                                <!-- Add more suggestion details as needed -->
                            `;
                        });
                    } else {
                        suggestionsContainer.innerHTML = "<p>No suggestions yet.</p>";
                    }
                } else {
                    detailsContainer.innerHTML = "<p>Idea not found.</p>";
                }
            } else {
                detailsContainer.innerHTML = "<p>No idea selected.</p>";
            }
        }

        function addNewSuggestion() {
            const newSuggestionText = document.getElementById("new-suggestion").value;
            const ideaId = getParameterByName("id");

            if (newSuggestionText && ideaId) {
                // Assuming you have a function to handle suggestion submission
                // You can replace this with your actual logic for submitting suggestions
                // For simplicity, we're just logging the suggestion to the console
                console.log(`New Suggestion for Idea ${ideaId}: ${newSuggestionText}`);
                // You can also update the UI to show the new suggestion immediately
                showDetails();
            }
        }

        showDetails();
    </script>
</body>
</html>
